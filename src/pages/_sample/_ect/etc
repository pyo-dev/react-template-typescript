useEffect(() => {
  const chart = chartRef.current?.chart;
  if (!chart) return;

  // 초기 범위 저장
  const x0 = chart.xAxis[0].getExtremes();
  const y0 = chart.yAxis[0].getExtremes();

  const original = {
    xRange: x0.dataMax - x0.dataMin,
    yRange: y0.dataMax - y0.dataMin,
    xMin: x0.dataMin,
    xMax: x0.dataMax,
    yMin: y0.dataMin,
    yMax: y0.dataMax,
  };

  const handleWheel = (e: WheelEvent) => {
    if (!e.shiftKey) return;
    e.preventDefault();

    const zoomFactor = 0.2;
    const isZoomIn = e.deltaY < 0;
    const direction = isZoomIn ? -1 : 1;

    /* ------------------------ X축 ------------------------ */
    const xAxis = chart.xAxis[0];
    const xExt = xAxis.getExtremes();
    const currXRange = xExt.max - xExt.min;

    const isFullX =
      Math.abs(currXRange - original.xRange) < original.xRange * 0.01;  
      // 1% 오차 내 → 전체범위로 인정

    // 전체 범위면 축소 금지
    if (!isZoomIn && isFullX) {
      return;
    }

    let newXMin = xExt.min + direction * currXRange * zoomFactor / 2;
    let newXMax = xExt.max - direction * currXRange * zoomFactor / 2;

    if (newXMin < original.xMin) newXMin = original.xMin;
    if (newXMax > original.xMax) newXMax = original.xMax;

    xAxis.setExtremes(newXMin, newXMax, true, false);

    /* ------------------------ Y축 ------------------------ */
    const yAxis = chart.yAxis[0];
    const yExt = yAxis.getExtremes();
    const currYRange = yExt.max - yExt.min;

    const isFullY =
      Math.abs(currYRange - original.yRange) < original.yRange * 0.01;

    if (!isZoomIn && isFullY) {
      return;
    }

    let newYMin = yExt.min + direction * currYRange * zoomFactor / 2;
    let newYMax = yExt.max - direction * currYRange * zoomFactor / 2;

    if (newYMin < original.yMin) newYMin = original.yMin;
    if (newYMax > original.yMax) newYMax = original.yMax;

    yAxis.setExtremes(newYMin, newYMax, true, false);
  };

  chart.container.addEventListener("wheel", handleWheel);
  return () => chart.container.removeEventListener("wheel", handleWheel);
}, []);
